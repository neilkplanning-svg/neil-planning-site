<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="××—×©×‘×•×Ÿ ×ª×§×¦×™×‘ ××©×¤×—×ª×™ - × ×”×œ×• ××ª ×”×”×›× ×¡×•×ª ×•×”×”×•×¦××•×ª ×©×œ×›×, ×’×œ×• ×›××” ××ª× ×™×›×•×œ×™× ×œ×—×¡×•×š ×•×§×‘×œ×• ×”××œ×¦×•×ª ×œ×©×™×¤×•×¨.">
    <title>××—×©×‘×•×Ÿ ×ª×§×¦×™×‘ ××©×¤×—×ª×™ | NEIL KAPPEL</title>
    
    <link rel="stylesheet" href="../style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800;900&family=Montserrat:wght@400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        .budget-section { background: var(--white); border-radius: var(--radius-xl); padding: 24px; margin-bottom: 24px; box-shadow: var(--shadow-md); }
        .budget-section h3 { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 2px solid var(--gray-100); }
        .budget-section h3 i { color: var(--accent-gold); }
        .income-section h3 { border-bottom-color: var(--success); }
        .expense-section h3 { border-bottom-color: var(--danger); }
        .savings-section h3 { border-bottom-color: var(--info); }
        .budget-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; }
        .budget-item { display: flex; flex-direction: column; }
        .budget-item label { font-size: 14px; color: var(--gray-600); margin-bottom: 6px; display: flex; align-items: center; gap: 6px; }
        .budget-item input[type="number"] { padding: 12px 16px; border: 2px solid var(--gray-200); border-radius: var(--radius-lg); font-size: 16px; font-family: var(--font-body); transition: all var(--transition-base); }
        .budget-item input:focus { outline: none; border-color: var(--accent-gold); box-shadow: 0 0 0 4px var(--accent-gold-subtle); }
        .section-total { margin-top: 20px; padding: 16px; background: var(--gray-50); border-radius: var(--radius-lg); display: flex; justify-content: space-between; align-items: center; font-weight: 600; flex-wrap: wrap; gap: 8px; }
        .income-section .section-total { background: var(--success-light); color: var(--success); }
        .expense-section .section-total { background: var(--danger-light); color: var(--danger); }
        .savings-section .section-total { background: var(--info-light); color: var(--info); }
        .summary-cards { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 32px; }
        @media (max-width: 900px) { .summary-cards { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 500px) { .summary-cards { grid-template-columns: 1fr; } }
        .summary-card { background: var(--white); border-radius: var(--radius-xl); padding: 20px; text-align: center; box-shadow: var(--shadow-md); border-top: 4px solid var(--gray-300); }
        .summary-card.income { border-top-color: var(--success); }
        .summary-card.expense { border-top-color: var(--danger); }
        .summary-card.savings { border-top-color: var(--info); }
        .summary-card.balance { border-top-color: var(--accent-gold); }
        .summary-card .card-icon { font-size: 28px; margin-bottom: 8px; }
        .summary-card.income .card-icon { color: var(--success); }
        .summary-card.expense .card-icon { color: var(--danger); }
        .summary-card.savings .card-icon { color: var(--info); }
        .summary-card.balance .card-icon { color: var(--accent-gold); }
        .summary-card .card-label { font-size: 13px; color: var(--gray-500); margin-bottom: 6px; }
        .summary-card .card-value { font-size: 22px; font-weight: 700; font-family: var(--font-heading); }
        .summary-card .card-sub { font-size: 12px; color: var(--gray-400); margin-top: 4px; }
        .summary-card.income .card-value { color: var(--success); }
        .summary-card.expense .card-value { color: var(--danger); }
        .summary-card.savings .card-value { color: var(--info); }
        .summary-card.balance .card-value.positive { color: var(--success); }
        .summary-card.balance .card-value.negative { color: var(--danger); }
        .ratio-bar { background: var(--gray-100); border-radius: var(--radius-full); height: 24px; overflow: hidden; display: flex; margin: 24px 0; }
        .ratio-segment { height: 100%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; color: white; transition: width 0.5s ease; }
        .ratio-needs { background: var(--danger); }
        .ratio-wants { background: var(--warning); }
        .ratio-savings { background: var(--success); }
        .ratio-legend { display: flex; justify-content: center; gap: 24px; flex-wrap: wrap; margin-bottom: 24px; }
        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 14px; }
        .legend-dot { width: 12px; height: 12px; border-radius: 50%; }
        .legend-dot.needs { background: var(--danger); }
        .legend-dot.wants { background: var(--warning); }
        .legend-dot.savings { background: var(--success); }
        .recommendation-box { background: linear-gradient(135deg, var(--info-light) 0%, var(--white) 100%); border: 1px solid var(--info); border-radius: var(--radius-xl); padding: 24px; margin-top: 24px; }
        .recommendation-box h4 { color: var(--info); margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
        .recommendation-box ul { list-style: none; padding: 0; }
        .recommendation-box li { padding: 8px 0; padding-right: 24px; position: relative; color: var(--gray-700); }
        .recommendation-box li::before { content: 'ğŸ’¡'; position: absolute; right: 0; }
        .expense-category { margin-bottom: 24px; }
        .expense-category h4 { font-size: 16px; color: var(--gray-700); margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .expense-category h4 i { color: var(--accent-gold); }
        .charts-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-top: 24px; }
        @media (max-width: 900px) { .charts-grid { grid-template-columns: 1fr; } }
        .chart-box { background: var(--white); border-radius: var(--radius-xl); padding: 24px; box-shadow: var(--shadow-md); }
        .chart-box h4 { margin-bottom: 16px; color: var(--gray-700); }
        .checkbox-group { display: flex; align-items: center; gap: 8px; margin: 8px 0; }
        .checkbox-group input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; }
        .checkbox-group label { cursor: pointer; font-size: 14px; color: var(--gray-600); }
        .sub-category { background: var(--gray-50); border-radius: var(--radius-lg); padding: 16px; margin-top: 12px; }
        .sub-category h5 { font-size: 14px; color: var(--gray-600); margin-bottom: 12px; display: flex; align-items: center; gap: 6px; }
        .sub-category .budget-grid { gap: 12px; }
        .sub-category .budget-item label { font-size: 13px; }
        .sub-category .budget-item input { padding: 10px 12px; font-size: 14px; }
        .toggle-section { display: none; }
        .toggle-section.active { display: block; }
        .savings-breakdown { font-size: 13px; color: var(--gray-500); margin-top: 8px; display: flex; flex-wrap: wrap; gap: 16px; }
        .savings-breakdown span { display: flex; align-items: center; gap: 4px; }
        .dual-percent { display: flex; flex-direction: column; align-items: center; }
        .dual-percent .main-percent { font-size: 18px; font-weight: 700; }
        .dual-percent .sub-percent { font-size: 12px; color: var(--gray-400); }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">×“×œ×’ ×œ×ª×•×›×Ÿ ×”×¨××©×™</a>
    <header>
        <div class="brand-wrapper">
            <a href="../index.html" aria-label="×“×£ ×”×‘×™×ª">
                <div class="monogram-header">NK</div>
                <div class="brand-text">
                    <div class="brand-name">NEIL KAPPEL</div>
                    <div class="brand-slogan">×ª×›× ×•×Ÿ ×¤×™× × ×¡×™ ××•×ª×× ××™×©×™×ª</div>
                </div>
            </a>
        </div>
        <button class="hamburger" aria-label="×ª×¤×¨×™×˜ × ×™×•×•×˜" aria-expanded="false"><span></span><span></span><span></span></button>
        <div class="nav-overlay"></div>
        <nav aria-label="× ×™×•×•×˜ ×¨××©×™">
            <a href="../index.html">×¨××©×™</a>
            <div class="dropdown">
                <span class="dropbtn" tabindex="0" role="button" aria-haspopup="true"><i class="fas fa-calculator" aria-hidden="true"></i> ×›×œ×™× â–¼</span>
                <div class="dropdown-content" role="menu">
                    <a href="tool-compound.html" role="menuitem"><i class="fas fa-chart-line" aria-hidden="true"></i> ××—×©×‘×•×Ÿ ×¨×™×‘×™×ª ×“×¨×™×‘×™×ª</a>
                    <a href="tool-loan.html" role="menuitem"><i class="fas fa-money-bill-wave" aria-hidden="true"></i> ××—×©×‘×•×Ÿ ×”×œ×•×•××”</a>
                    <a href="tool-leverage.html" role="menuitem"><i class="fas fa-balance-scale" aria-hidden="true"></i> ××—×©×‘×•×Ÿ ××™× ×•×£ ×¢×¦××™</a>
                    <a href="tool-refinance.html" role="menuitem"><i class="fas fa-sync-alt" aria-hidden="true"></i> ×›×“××™×•×ª ××—×–×•×¨ ×”×œ×•×•××”</a>
                    <a href="tool-invest-leverage.html" role="menuitem"><i class="fas fa-rocket" aria-hidden="true"></i> ×›×“××™×•×ª ××™× ×•×£ ×œ×”×©×§×¢×”</a>
                    <a href="tool-budget.html" role="menuitem" class="active"><i class="fas fa-wallet" aria-hidden="true"></i> ××—×©×‘×•×Ÿ ×ª×§×¦×™×‘ ××©×¤×—×ª×™</a>
                </div>
            </div>
            <a href="../resources.html">××§×•×¨×•×ª ××™×“×¢</a>
            <a href="../knowledge.html">××¨×›×– ×™×“×¢</a>
            <a href="../about.html">××•×“×•×ª</a>
            <a href="https://calendar.app.google/sqr288yJLiTTyq4b6" target="_blank" rel="noopener" class="cta-button"><i class="fas fa-calendar-check" aria-hidden="true"></i> ×ª×™××•× ×¤×’×™×©×”</a>
        </nav>
    </header>

    <div class="tool-header">
        <h1><i class="fas fa-wallet" aria-hidden="true"></i> ××—×©×‘×•×Ÿ ×ª×§×¦×™×‘ ××©×¤×—×ª×™</h1>
        <p>× ×”×œ×• ××ª ×”×›×¡×£ ×‘×—×›××”, ×’×œ×• ×œ××Ÿ ×”×•× ×”×•×œ×š ×•××™×¤×” ××¤×©×¨ ×œ×—×¡×•×š</p>
    </div>

    <div class="buffett-quote" style="margin: -20px auto 40px; position: relative; z-index: 2;">
        <i class="fas fa-quote-right quote-icon" aria-hidden="true"></i>
        <div class="quote-text" style="font-size: 1.1em;">"××œ ×ª×—×¡×›×• ××” ×©× ×©××¨ ××—×¨×™ ×”×”×•×¦××•×ª.<br>×ª×•×¦×™××• ××” ×©× ×©××¨ ××—×¨×™ ×”×—×™×¡×›×•×Ÿ."</div>
        <div class="quote-author">- ×•×•×¨×Ÿ ×‘××¤×˜</div>
    </div>

    <main id="main-content" class="tool-container" style="max-width: 1000px;">
        
        <!-- Income Section -->
        <div class="budget-section income-section">
            <h3><i class="fas fa-arrow-down" aria-hidden="true"></i> ×”×›× ×¡×•×ª ×—×•×“×©×™×•×ª</h3>
            <div class="budget-grid">
                <div class="budget-item"><label><i class="fas fa-briefcase"></i> ××©×›×•×¨×ª × ×˜×• (××¤×¨× ×¡/×ª ×¨××©×™/×ª)</label><input type="number" id="salary1" value="12000" oninput="calculateBudget()"></div>
                <div class="budget-item"><label><i class="fas fa-briefcase"></i> ××©×›×•×¨×ª × ×˜×• (××¤×¨× ×¡/×ª ×©× ×™/×”)</label><input type="number" id="salary2" value="8000" oninput="calculateBudget()"></div>
                <div class="budget-item"><label><i class="fas fa-baby"></i> ×§×¦×‘×ª ×™×œ×“×™×</label><input type="number" id="childAllowance" value="300" oninput="calculateBudget()"></div>
                <div class="budget-item"><label><i class="fas fa-plus-circle"></i> ×”×›× ×¡×•×ª × ×•×¡×¤×•×ª</label><input type="number" id="otherIncome" value="0" oninput="calculateBudget()"></div>
            </div>
            <div class="section-total"><span>×¡×”"×› ×”×›× ×¡×•×ª:</span><span id="totalIncome">â‚ª20,300</span></div>
        </div>

        <!-- Savings Section with Pension/Hishtalmut Options -->
        <div class="budget-section savings-section">
            <h3><i class="fas fa-piggy-bank" aria-hidden="true"></i> ×—×™×¡×›×•×Ÿ (×”×•×¨××•×ª ×§×‘×¢ ×•×”×¤×¨×©×•×ª)</h3>
            
            <div class="budget-grid">
                <div class="budget-item"><label><i class="fas fa-landmark"></i> ×§×•×¤×ª ×’××œ ×œ×”×©×§×¢×”</label><input type="number" id="savingsGemel" value="0" oninput="calculateBudget()"></div>
                <div class="budget-item"><label><i class="fas fa-coins"></i> ×”×©×§×¢×•×ª / ×‘×¨×•×§×¨</label><input type="number" id="savingsInvest" value="0" oninput="calculateBudget()"></div>
                <div class="budget-item"><label><i class="fas fa-wallet"></i> ×—×™×¡×›×•×Ÿ ××—×¨</label><input type="number" id="savingsOther" value="0" oninput="calculateBudget()"></div>
            </div>
            
            <!-- Keren Hishtalmut Toggle -->
            <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--gray-200);">
                <div class="checkbox-group">
                    <input type="checkbox" id="includeKeren" onchange="toggleSection('kerenSection', this.checked); calculateBudget();">
                    <label for="includeKeren"><strong>×©×§×œ×œ ×§×¨×Ÿ ×”×©×ª×œ××•×ª ×‘×—×™×¡×›×•×Ÿ</strong></label>
                </div>
                <p style="font-size: 12px; color: var(--gray-400); margin: 4px 0 0 26px;">×”×¤×¨×©×•×ª ×¢×•×‘×“ ×›×‘×¨ × ×•×›×• ××”× ×˜×• - ×™×ª×•×•×¡×¤×• ×œ×—×™×©×•×‘ ×”××—×•×–×™×. ×”×¤×¨×©×•×ª ××¢×‘×™×“ ×™×•×¦×’×• ×‘× ×¤×¨×“.</p>
                <div id="kerenSection" class="toggle-section">
                    <div class="sub-category">
                        <h5><i class="fas fa-user"></i> ××¤×¨× ×¡/×ª ×¨××©×™/×ª</h5>
                        <div class="budget-grid">
                            <div class="budget-item"><label>×”×¤×¨×©×ª ×¢×•×‘×“</label><input type="number" id="keren1Employee" value="0" oninput="calculateBudget()"></div>
                            <div class="budget-item"><label>×”×¤×¨×©×ª ××¢×‘×™×“</label><input type="number" id="keren1Employer" value="0" oninput="calculateBudget()"></div>
                        </div>
                    </div>
                    <div class="sub-category" style="margin-top: 8px;">
                        <h5><i class="fas fa-user"></i> ××¤×¨× ×¡/×ª ×©× ×™/×”</h5>
                        <div class="budget-grid">
                            <div class="budget-item"><label>×”×¤×¨×©×ª ×¢×•×‘×“</label><input type="number" id="keren2Employee" value="0" oninput="calculateBudget()"></div>
                            <div class="budget-item"><label>×”×¤×¨×©×ª ××¢×‘×™×“</label><input type="number" id="keren2Employer" value="0" oninput="calculateBudget()"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Pension Toggle -->
            <div style="margin-top: 16px;">
                <div class="checkbox-group">
                    <input type="checkbox" id="includePension" onchange="toggleSection('pensionSection', this.checked); calculateBudget();">
                    <label for="includePension"><strong>×©×§×œ×œ ×¤× ×¡×™×” ×‘×—×™×¡×›×•×Ÿ</strong></label>
                </div>
                <p style="font-size: 12px; color: var(--gray-400); margin: 4px 0 0 26px;">×”×¤×¨×©×•×ª ×¢×•×‘×“ ×›×‘×¨ × ×•×›×• ××”× ×˜×• - ×™×ª×•×•×¡×¤×• ×œ×—×™×©×•×‘ ×”××—×•×–×™×. ×”×¤×¨×©×•×ª ××¢×‘×™×“ ×™×•×¦×’×• ×‘× ×¤×¨×“.</p>
                <div id="pensionSection" class="toggle-section">
                    <div class="sub-category">
                        <h5><i class="fas fa-user"></i> ××¤×¨× ×¡/×ª ×¨××©×™/×ª</h5>
                        <div class="budget-grid">
                            <div class="budget-item"><label>×”×¤×¨×©×ª ×¢×•×‘×“</label><input type="number" id="pension1Employee" value="0" oninput="calculateBudget()"></div>
                            <div class="budget-item"><label>×”×¤×¨×©×ª ××¢×‘×™×“</label><input type="number" id="pension1Employer" value="0" oninput="calculateBudget()"></div>
                        </div>
                    </div>
                    <div class="sub-category" style="margin-top: 8px;">
                        <h5><i class="fas fa-user"></i> ××¤×¨× ×¡/×ª ×©× ×™/×”</h5>
                        <div class="budget-grid">
                            <div class="budget-item"><label>×”×¤×¨×©×ª ×¢×•×‘×“</label><input type="number" id="pension2Employee" value="0" oninput="calculateBudget()"></div>
                            <div class="budget-item"><label>×”×¤×¨×©×ª ××¢×‘×™×“</label><input type="number" id="pension2Employer" value="0" oninput="calculateBudget()"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="section-total">
                <div>
                    <div>×¡×”"×› ×—×™×¡×›×•×Ÿ ××™×©×™: <strong id="totalSavingsPersonal">â‚ª0</strong></div>
                    <div class="savings-breakdown" id="savingsBreakdown" style="display: none;">
                        <span><i class="fas fa-building" style="color: var(--gray-400);"></i> ×”×¤×¨×©×•×ª ××¢×‘×™×“: <strong id="totalEmployerContrib">â‚ª0</strong></span>
                        <span><i class="fas fa-piggy-bank" style="color: var(--success);"></i> ×¡×”"×› ×›×•×œ×œ ××¢×‘×™×“: <strong id="totalSavingsWithEmployer">â‚ª0</strong></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Expenses Section -->
        <div class="budget-section expense-section">
            <h3><i class="fas fa-arrow-up" aria-hidden="true"></i> ×”×•×¦××•×ª ×—×•×“×©×™×•×ª</h3>
            
            <!-- Housing -->
            <div class="expense-category">
                <h4><i class="fas fa-home"></i> ×“×™×•×¨</h4>
                <div class="budget-grid">
                    <div class="budget-item"><label>××©×›× ×ª× / ×©×›×¨ ×“×™×¨×”</label><input type="number" id="housing" value="5000" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×•×¢×“ ×‘×™×ª</label><input type="number" id="vaadBayit" value="200" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>××¨× ×•× ×” (×—×•×“×©×™)</label><input type="number" id="arnona" value="400" oninput="calculateBudget()"></div>
                </div>
            </div>
            
            <!-- Loans & Payments -->
            <div class="expense-category">
                <h4><i class="fas fa-credit-card"></i> ×”×œ×•×•××•×ª ×•×ª×©×œ×•××™×</h4>
                <div class="budget-grid">
                    <div class="budget-item"><label>×”×—×–×¨ ×”×œ×•×•××” ×‘× ×§××™×ª</label><input type="number" id="bankLoan" value="0" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×”×—×–×¨ ×”×œ×•×•××ª ×¨×›×‘</label><input type="number" id="carLoan" value="0" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×ª×©×œ×•××™× (×§×¨×“×™×˜)</label><input type="number" id="creditPayments" value="0" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×”×œ×•×•××•×ª ××—×¨×•×ª</label><input type="number" id="otherLoans" value="0" oninput="calculateBudget()"></div>
                </div>
            </div>
            
            <!-- Utilities -->
            <div class="expense-category">
                <h4><i class="fas fa-bolt"></i> ×—×©×‘×•× ×•×ª ×©×•×˜×¤×™×</h4>
                <div class="budget-grid">
                    <div class="budget-item"><label>×—×©××œ</label><input type="number" id="electricity" value="350" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>××™×</label><input type="number" id="water" value="150" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×’×–</label><input type="number" id="gas" value="100" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>××™× ×˜×¨× ×˜ ×•×˜×œ×•×•×™×–×™×”</label><input type="number" id="internet" value="200" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×˜×œ×¤×•×Ÿ × ×™×™×“</label><input type="number" id="phone" value="150" oninput="calculateBudget()"></div>
                </div>
            </div>
            
            <!-- Transportation -->
            <div class="expense-category">
                <h4><i class="fas fa-car"></i> ×ª×—×‘×•×¨×”</h4>
                <div class="budget-grid">
                    <div class="budget-item"><label>×œ×™×¡×™× ×’ / ×”×—×–×¨ ×¨×›×‘ / ×ª×—"×¦</label><input type="number" id="carPayment" value="2000" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×“×œ×§</label><input type="number" id="fuel" value="800" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×‘×™×˜×•×— ×¨×›×‘ (×—×•×“×©×™)</label><input type="number" id="carInsurance" value="350" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×˜×¡×˜ + ×˜×™×¤×•×œ×™× (×—×•×“×©×™)</label><input type="number" id="carMaintenance" value="150" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×©×•× ×•×ª (××’×¨×”, ×—× ×™×” ×•×›×•')</label><input type="number" id="transportMisc" value="0" oninput="calculateBudget()"></div>
                </div>
            </div>
            
            <!-- Food -->
            <div class="expense-category">
                <h4><i class="fas fa-shopping-cart"></i> ××–×•×Ÿ ×•×¦×¨×™×›×”</h4>
                <div class="budget-grid">
                    <div class="budget-item"><label>×¡×•×¤×¨ / ××›×•×œ×ª</label><input type="number" id="groceries" value="3000" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>××¡×¢×“×•×ª ×•××•×›×œ ×‘×—×•×¥</label><input type="number" id="restaurants" value="500" oninput="calculateBudget()"></div>
                </div>
            </div>
            
            <!-- Children -->
            <div class="expense-category">
                <h4><i class="fas fa-child"></i> ×™×œ×“×™×</h4>
                <div class="budget-grid">
                    <div class="budget-item"><label>××¢×•×Ÿ / ×’×Ÿ / ×¦×”×¨×•×Ÿ</label><input type="number" id="childcare" value="2500" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×—×•×’×™× ×œ×™×œ×“×™×</label><input type="number" id="childActivities" value="400" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×‘×™×’×•×“ ×™×œ×“×™×</label><input type="number" id="childClothes" value="200" oninput="calculateBudget()"></div>
                </div>
            </div>
            
            <!-- Pets -->
            <div class="expense-category">
                <h4><i class="fas fa-paw"></i> ×—×™×•×ª ××—××“</h4>
                <div class="budget-grid">
                    <div class="budget-item"><label>××–×•×Ÿ ×œ×—×™×•×ª</label><input type="number" id="petFood" value="0" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×•×˜×¨×™× ×¨ ×•×‘×™×˜×•×—</label><input type="number" id="petVet" value="0" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×¦×™×•×“ ×•××—×¨</label><input type="number" id="petOther" value="0" oninput="calculateBudget()"></div>
                </div>
            </div>
            
            <!-- Insurance & Health -->
            <div class="expense-category">
                <h4><i class="fas fa-shield-alt"></i> ×‘×™×˜×•×— ×•×‘×¨×™××•×ª</h4>
                <div class="budget-grid">
                    <div class="budget-item"><label>×‘×™×˜×•×—×™× (×¡×”"×› ×—×•×“×©×™)</label><input type="number" id="insuranceTotal" value="0" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×‘×™×˜×•×— ×—×™×™×</label><input type="number" id="lifeInsurance" value="300" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×‘×™×˜×•×— ×‘×¨×™××•×ª ×¤×¨×˜×™</label><input type="number" id="healthInsurance" value="250" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×§×•×¤×ª ×—×•×œ×™× ××©×œ×™×</label><input type="number" id="kupat" value="100" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×ª×¨×•×¤×•×ª ×•×¨×•×¤××™×</label><input type="number" id="medical" value="150" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×¤××¨××” (×§×•×¡××˜×™×§×”, ×”×™×’×™×™× ×”)</label><input type="number" id="pharma" value="200" oninput="calculateBudget()"></div>
                </div>
            </div>
            
            <!-- Entertainment & Lifestyle -->
            <div class="expense-category">
                <h4><i class="fas fa-smile"></i> ×¤× ××™ ×•××•×¨×— ×—×™×™×</h4>
                <div class="budget-grid">
                    <div class="budget-item"><label>×‘×™×œ×•×™×™× ×•×™×¦×™××•×ª</label><input type="number" id="entertainment" value="400" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×× ×•×™×™× (× ×˜×¤×œ×™×§×¡, ×¡×¤×•×˜×™×¤×™×™...)</label><input type="number" id="subscriptions" value="150" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×—×“×¨ ×›×•×©×¨ / ×—×•×’×™× ×œ××‘×•×’×¨×™×</label><input type="number" id="gym" value="0" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×‘×™×’×•×“ ×•× ×¢×œ×™×™× (××‘×•×’×¨×™×)</label><input type="number" id="clothing" value="300" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×˜×™×¤×•×— ×•×™×•×¤×™</label><input type="number" id="beauty" value="200" oninput="calculateBudget()"></div>
                </div>
            </div>
            
            <!-- Other -->
            <div class="expense-category">
                <h4><i class="fas fa-ellipsis-h"></i> ××—×¨</h4>
                <div class="budget-grid">
                    <div class="budget-item"><label>××ª× ×•×ª ×•×ª×¨×•××•×ª</label><input type="number" id="gifts" value="200" oninput="calculateBudget()"></div>
                    <div class="budget-item"><label>×”×•×¦××•×ª ×‘×œ×ª×™ ×¦×¤×•×™×•×ª</label><input type="number" id="unexpected" value="300" oninput="calculateBudget()"></div>
                </div>
            </div>
            
            <div class="section-total"><span>×¡×”"×› ×”×•×¦××•×ª:</span><span id="totalExpenses">â‚ª0</span></div>
        </div>

        <button class="calc-btn" onclick="calculateBudget()"><i class="fas fa-calculator" aria-hidden="true"></i> ×—×©×‘ ×ª×§×¦×™×‘</button>

        <!-- Results Section -->
        <div id="results" class="result-area" style="display: block; margin-top: 32px;">
            <div class="summary-cards">
                <div class="summary-card income"><div class="card-icon"><i class="fas fa-arrow-down"></i></div><div class="card-label">×¡×”"×› ×”×›× ×¡×•×ª</div><div class="card-value" id="summaryIncome">â‚ª20,300</div></div>
                <div class="summary-card expense"><div class="card-icon"><i class="fas fa-arrow-up"></i></div><div class="card-label">×¡×”"×› ×”×•×¦××•×ª</div><div class="card-value" id="summaryExpenses">â‚ª18,350</div></div>
                <div class="summary-card savings"><div class="card-icon"><i class="fas fa-piggy-bank"></i></div><div class="card-label">×—×™×¡×›×•×Ÿ ××™×©×™</div><div class="card-value" id="summarySavings">â‚ª0</div><div class="card-sub" id="summarySavingsEmployer"></div></div>
                <div class="summary-card balance"><div class="card-icon"><i class="fas fa-wallet"></i></div><div class="card-label">×™×ª×¨×” ×¤× ×•×™×”</div><div class="card-value positive" id="summaryBalance">â‚ª1,950</div></div>
            </div>
            
            <div style="background: var(--white); border-radius: var(--radius-xl); padding: 24px; box-shadow: var(--shadow-md); margin-bottom: 24px;">
                <h4 style="margin-bottom: 16px; text-align: center;"><i class="fas fa-chart-pie" style="color: var(--accent-gold);"></i> ×—×œ×•×§×ª ×”×”×•×¦××•×ª ×©×œ×›× vs ×›×œ×œ 50/30/20</h4>
                <p style="text-align: center; color: var(--gray-500); font-size: 14px; margin-bottom: 16px;">×›×œ×œ 50/30/20: 50% ×¦×¨×›×™×, 30% ×¨×¦×•× ×•×ª, 20% ×—×™×¡×›×•×Ÿ</p>
                <div class="ratio-bar" id="ratioBar">
                    <div class="ratio-segment ratio-needs" id="ratioNeeds" style="width: 60%;">60%</div>
                    <div class="ratio-segment ratio-wants" id="ratioWants" style="width: 25%;">25%</div>
                    <div class="ratio-segment ratio-savings" id="ratioSavings" style="width: 15%;">15%</div>
                </div>
                <div class="ratio-legend">
                    <div class="legend-item"><div class="legend-dot needs"></div><span>×¦×¨×›×™× (<span id="needsPercent">60</span>%)</span></div>
                    <div class="legend-item"><div class="legend-dot wants"></div><span>×¨×¦×•× ×•×ª (<span id="wantsPercent">25</span>%)</span></div>
                    <div class="legend-item">
                        <div class="legend-dot savings"></div>
                        <span>×—×™×¡×›×•×Ÿ ××™×©×™ (<span id="savingsPercent">15</span>%)</span>
                        <span id="savingsPercentWithEmployer" style="color: var(--gray-400); font-size: 12px;"></span>
                    </div>
                </div>
                <div id="ruleStatus" style="text-align: center; padding: 16px; border-radius: var(--radius-lg);"></div>
            </div>
            
            <div class="charts-grid">
                <div class="chart-box"><h4><i class="fas fa-chart-pie" style="color: var(--accent-gold);"></i> ×”×ª×¤×œ×’×•×ª ×”×•×¦××•×ª ×œ×¤×™ ×§×˜×’×•×¨×™×”</h4><canvas id="expenseChart"></canvas></div>
                <div class="chart-box"><h4><i class="fas fa-balance-scale" style="color: var(--accent-gold);"></i> ×”×›× ×¡×•×ª ××•×œ ×”×•×¦××•×ª ×•×—×™×¡×›×•×Ÿ</h4><canvas id="balanceChart"></canvas></div>
            </div>
            
            <div class="recommendation-box" id="recommendations"><h4><i class="fas fa-lightbulb"></i> ×”××œ×¦×•×ª ×œ×©×™×¤×•×¨</h4><ul id="recommendationsList"><li>×˜×•×¢×Ÿ ×”××œ×¦×•×ª...</li></ul></div>
            
            <div style="background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-blue-dark) 100%); padding: 24px; border-radius: 12px; text-align: center; margin-top: 24px;">
                <p style="color: rgba(255,255,255,0.9); margin-bottom: 16px;">×¨×•×¦×™× ×œ×‘× ×•×ª ×ª×•×›× ×™×ª ×ª×§×¦×™×‘ ××•×ª×××ª ××™×©×™×ª?</p>
                <a href="https://calendar.app.google/sqr288yJLiTTyq4b6" target="_blank" rel="noopener" class="cta-button"><i class="fas fa-calendar-alt" aria-hidden="true"></i> ×§×‘×¢×• ×©×™×—×ª ×™×™×¢×•×¥</a>
            </div>
        </div>

        <div style="margin-top: 48px; padding-top: 32px; border-top: 1px solid var(--gray-200);">
            <h3 style="margin-bottom: 16px;"><i class="fas fa-graduation-cap" style="color: var(--accent-gold);"></i> ××”×• ×›×œ×œ 50/30/20?</h3>
            <p style="color: var(--gray-600); line-height: 1.8;">×›×œ×œ 50/30/20 ×”×•× ×©×™×˜×” ×¤×©×•×˜×” ×•×™×¢×™×œ×” ×œ× ×™×”×•×œ ×ª×§×¦×™×‘ ××©×¤×—×ª×™:</p>
            <ul style="color: var(--gray-600); line-height: 2; margin-top: 12px; margin-right: 20px;">
                <li><strong style="color: var(--danger);">50% ×œ×¦×¨×›×™×:</strong> ×“×™×•×¨, ××–×•×Ÿ, ×ª×—×‘×•×¨×”, ×‘×™×˜×•×—, ×”×œ×•×•××•×ª.</li>
                <li><strong style="color: var(--warning);">30% ×œ×¨×¦×•× ×•×ª:</strong> ×‘×™×œ×•×™×™×, ××¡×¢×“×•×ª, ×§× ×™×•×ª, ×× ×•×™×™×.</li>
                <li><strong style="color: var(--success);">20% ×œ×—×™×¡×›×•×Ÿ:</strong> ×—×™×¡×›×•×Ÿ, ×”×©×§×¢×•×ª, ×§×¨×Ÿ ×—×™×¨×•×, ×¤× ×¡×™×”, ×§×¨×Ÿ ×”×©×ª×œ××•×ª.</li>
            </ul>
        </div>
    </main>

    <footer>
        <p>Â© 2025 NEIL KAPPEL. Financial Planning & Strategy.</p>
        <p>×œ×™×¦×™×¨×ª ×§×©×¨: <a href="mailto:Neil.k.planning@gmail.com">Neil.k.planning@gmail.com</a> | ×˜×œ×¤×•×Ÿ: <a href="tel:+972545882618">054-5882618</a></p>
        <div class="legal-disclaimer"><strong>×’×™×œ×•×™ × ××•×ª:</strong> ×”××—×©×‘×•×Ÿ × ×•×¢×“ ×œ×”××—×©×” ×•×œ×ª×›× ×•×Ÿ ××™×©×™ ×‘×œ×‘×“ ×•××™× ×• ××”×•×•×” ×™×™×¢×•×¥ ×¤×™× × ×¡×™ ××§×¦×•×¢×™.</div>
    </footer>

    <a href="https://wa.me/972545882618" class="whatsapp-float" target="_blank" rel="noopener" aria-label="×™×¦×™×¨×ª ×§×©×¨ ×‘×•×•××˜×¡××¤"><i class="fab fa-whatsapp" aria-hidden="true"></i></a>

    <script src="../script.js"></script>
    <script>
        let expenseChart = null;
        let balanceChart = null;
        
        function toggleSection(sectionId, show) {
            const section = document.getElementById(sectionId);
            if (show) {
                section.classList.add('active');
            } else {
                section.classList.remove('active');
            }
        }
        
        function formatCurrencyBudget(num) {
            return new Intl.NumberFormat('he-IL', { style: 'currency', currency: 'ILS', maximumFractionDigits: 0 }).format(num);
        }
        
        function calculateBudget() {
            // Income (net salary)
            const salary1 = parseFloat(document.getElementById('salary1').value) || 0;
            const salary2 = parseFloat(document.getElementById('salary2').value) || 0;
            const childAllowance = parseFloat(document.getElementById('childAllowance').value) || 0;
            const otherIncome = parseFloat(document.getElementById('otherIncome').value) || 0;
            const baseIncome = salary1 + salary2 + childAllowance + otherIncome;
            
            // Regular Savings (from net income)
            const savingsGemel = parseFloat(document.getElementById('savingsGemel').value) || 0;
            const savingsInvest = parseFloat(document.getElementById('savingsInvest').value) || 0;
            const savingsOther = parseFloat(document.getElementById('savingsOther').value) || 0;
            let personalSavings = savingsGemel + savingsInvest + savingsOther;
            
            // Employee contributions (already deducted from net - need to add back for percentage calc)
            let employeeContributions = 0;
            // Employer contributions (not part of personal savings for percentage calc)
            let employerContributions = 0;
            
            // Keren Hishtalmut (if checked)
            if (document.getElementById('includeKeren').checked) {
                const keren1Emp = parseFloat(document.getElementById('keren1Employee').value) || 0;
                const keren1Employer = parseFloat(document.getElementById('keren1Employer').value) || 0;
                const keren2Emp = parseFloat(document.getElementById('keren2Employee').value) || 0;
                const keren2Employer = parseFloat(document.getElementById('keren2Employer').value) || 0;
                
                employeeContributions += keren1Emp + keren2Emp;
                employerContributions += keren1Employer + keren2Employer;
                personalSavings += keren1Emp + keren2Emp;
            }
            
            // Pension (if checked)
            if (document.getElementById('includePension').checked) {
                const pension1Emp = parseFloat(document.getElementById('pension1Employee').value) || 0;
                const pension1Employer = parseFloat(document.getElementById('pension1Employer').value) || 0;
                const pension2Emp = parseFloat(document.getElementById('pension2Employee').value) || 0;
                const pension2Employer = parseFloat(document.getElementById('pension2Employer').value) || 0;
                
                employeeContributions += pension1Emp + pension2Emp;
                employerContributions += pension1Employer + pension2Employer;
                personalSavings += pension1Emp + pension2Emp;
            }
            
            // Total savings including employer contributions (for display only)
            const totalSavingsWithEmployer = personalSavings + employerContributions;
            
            // Adjusted income for percentage calculations
            // Employee contributions were already deducted from net, so add them back
            const adjustedIncome = baseIncome + employeeContributions;
            
            // Show/hide employer breakdown
            const hasEmployerContrib = employerContributions > 0;
            document.getElementById('savingsBreakdown').style.display = hasEmployerContrib ? 'flex' : 'none';
            document.getElementById('totalEmployerContrib').textContent = formatCurrencyBudget(employerContributions);
            document.getElementById('totalSavingsWithEmployer').textContent = formatCurrencyBudget(totalSavingsWithEmployer);
            
            // Expenses - Needs
            const needs = {
                housing: parseFloat(document.getElementById('housing').value) || 0,
                vaadBayit: parseFloat(document.getElementById('vaadBayit').value) || 0,
                arnona: parseFloat(document.getElementById('arnona').value) || 0,
                bankLoan: parseFloat(document.getElementById('bankLoan').value) || 0,
                carLoan: parseFloat(document.getElementById('carLoan').value) || 0,
                creditPayments: parseFloat(document.getElementById('creditPayments').value) || 0,
                otherLoans: parseFloat(document.getElementById('otherLoans').value) || 0,
                electricity: parseFloat(document.getElementById('electricity').value) || 0,
                water: parseFloat(document.getElementById('water').value) || 0,
                gas: parseFloat(document.getElementById('gas').value) || 0,
                internet: parseFloat(document.getElementById('internet').value) || 0,
                phone: parseFloat(document.getElementById('phone').value) || 0,
                carPayment: parseFloat(document.getElementById('carPayment').value) || 0,
                fuel: parseFloat(document.getElementById('fuel').value) || 0,
                carInsurance: parseFloat(document.getElementById('carInsurance').value) || 0,
                carMaintenance: parseFloat(document.getElementById('carMaintenance').value) || 0,
                transportMisc: parseFloat(document.getElementById('transportMisc').value) || 0,
                groceries: parseFloat(document.getElementById('groceries').value) || 0,
                childcare: parseFloat(document.getElementById('childcare').value) || 0,
                childClothes: parseFloat(document.getElementById('childClothes').value) || 0,
                petFood: parseFloat(document.getElementById('petFood').value) || 0,
                petVet: parseFloat(document.getElementById('petVet').value) || 0,
                insuranceTotal: parseFloat(document.getElementById('insuranceTotal').value) || 0,
                lifeInsurance: parseFloat(document.getElementById('lifeInsurance').value) || 0,
                healthInsurance: parseFloat(document.getElementById('healthInsurance').value) || 0,
                kupat: parseFloat(document.getElementById('kupat').value) || 0,
                medical: parseFloat(document.getElementById('medical').value) || 0,
                pharma: parseFloat(document.getElementById('pharma').value) || 0,
                unexpected: parseFloat(document.getElementById('unexpected').value) || 0
            };
            
            // Expenses - Wants
            const wants = {
                restaurants: parseFloat(document.getElementById('restaurants').value) || 0,
                childActivities: parseFloat(document.getElementById('childActivities').value) || 0,
                petOther: parseFloat(document.getElementById('petOther').value) || 0,
                entertainment: parseFloat(document.getElementById('entertainment').value) || 0,
                subscriptions: parseFloat(document.getElementById('subscriptions').value) || 0,
                gym: parseFloat(document.getElementById('gym').value) || 0,
                clothing: parseFloat(document.getElementById('clothing').value) || 0,
                beauty: parseFloat(document.getElementById('beauty').value) || 0,
                gifts: parseFloat(document.getElementById('gifts').value) || 0
            };
            
            const totalNeeds = Object.values(needs).reduce((a, b) => a + b, 0);
            const totalWants = Object.values(wants).reduce((a, b) => a + b, 0);
            const totalExpenses = totalNeeds + totalWants;
            
            // Balance calculation - using base income (what they actually have in hand)
            // Personal savings from net income (excluding employee contributions which are already deducted)
            const savingsFromNet = savingsGemel + savingsInvest + savingsOther;
            const balance = baseIncome - totalExpenses - savingsFromNet;
            
            // Calculate percentages using adjusted income
            const needsPercent = adjustedIncome > 0 ? Math.round((totalNeeds / adjustedIncome) * 100) : 0;
            const wantsPercent = adjustedIncome > 0 ? Math.round((totalWants / adjustedIncome) * 100) : 0;
            
            // Personal savings percentage (what the couple actually saves - their choice)
            const personalSavingsForPercent = personalSavings + Math.max(balance, 0);
            const savingsPercent = adjustedIncome > 0 ? Math.round((personalSavingsForPercent / adjustedIncome) * 100) : 0;
            
            // Total savings percentage including employer (for reference)
            const totalSavingsForPercent = totalSavingsWithEmployer + Math.max(balance, 0);
            const savingsPercentWithEmployer = adjustedIncome > 0 ? Math.round((totalSavingsForPercent / adjustedIncome) * 100) : 0;
            
            // Update display
            document.getElementById('totalIncome').textContent = formatCurrencyBudget(baseIncome);
            document.getElementById('totalSavingsPersonal').textContent = formatCurrencyBudget(personalSavings);
            document.getElementById('totalExpenses').textContent = formatCurrencyBudget(totalExpenses);
            document.getElementById('summaryIncome').textContent = formatCurrencyBudget(baseIncome);
            document.getElementById('summaryExpenses').textContent = formatCurrencyBudget(totalExpenses);
            document.getElementById('summarySavings').textContent = formatCurrencyBudget(personalSavings);
            
            // Show employer contribution in summary if exists
            if (hasEmployerContrib) {
                document.getElementById('summarySavingsEmployer').textContent = '+ ' + formatCurrencyBudget(employerContributions) + ' ××¢×‘×™×“';
                document.getElementById('savingsPercentWithEmployer').textContent = ' | ×›×•×œ×œ ××¢×‘×™×“: ' + savingsPercentWithEmployer + '%';
            } else {
                document.getElementById('summarySavingsEmployer').textContent = '';
                document.getElementById('savingsPercentWithEmployer').textContent = '';
            }
            
            const balanceEl = document.getElementById('summaryBalance');
            balanceEl.textContent = formatCurrencyBudget(balance);
            balanceEl.className = 'card-value ' + (balance >= 0 ? 'positive' : 'negative');
            
            const displayNeedsP = Math.min(needsPercent, 100);
            const displayWantsP = Math.min(wantsPercent, 100 - displayNeedsP);
            const displaySavingsP = Math.max(0, 100 - displayNeedsP - displayWantsP);
            
            document.getElementById('ratioNeeds').style.width = displayNeedsP + '%';
            document.getElementById('ratioNeeds').textContent = needsPercent > 5 ? needsPercent + '%' : '';
            document.getElementById('ratioWants').style.width = displayWantsP + '%';
            document.getElementById('ratioWants').textContent = wantsPercent > 5 ? wantsPercent + '%' : '';
            document.getElementById('ratioSavings').style.width = displaySavingsP + '%';
            document.getElementById('ratioSavings').textContent = savingsPercent > 5 ? savingsPercent + '%' : '';
            
            document.getElementById('needsPercent').textContent = needsPercent;
            document.getElementById('wantsPercent').textContent = wantsPercent;
            document.getElementById('savingsPercent').textContent = Math.max(savingsPercent, 0);
            
            const ruleStatus = document.getElementById('ruleStatus');
            if (needsPercent <= 50 && wantsPercent <= 30 && savingsPercent >= 20) {
                ruleStatus.innerHTML = '<i class="fas fa-check-circle" style="color: var(--success);"></i> ××¦×•×™×Ÿ! ××ª× ×¢×•××“×™× ×‘×›×œ×œ 50/30/20';
                ruleStatus.style.background = 'var(--success-light)';
                ruleStatus.style.color = 'var(--success)';
            } else if (balance < 0) {
                ruleStatus.innerHTML = '<i class="fas fa-exclamation-triangle" style="color: var(--danger);"></i> ××ª× ×‘×’×™×¨×¢×•×Ÿ! ×”×”×•×¦××•×ª ×’×‘×•×”×•×ª ××”×”×›× ×¡×•×ª';
                ruleStatus.style.background = 'var(--danger-light)';
                ruleStatus.style.color = 'var(--danger)';
            } else {
                ruleStatus.innerHTML = '<i class="fas fa-info-circle" style="color: var(--warning);"></i> ×™×© ××§×•× ×œ×©×™×¤×•×¨ - ×¨××• ×”××œ×¦×•×ª ×œ××˜×”';
                ruleStatus.style.background = 'var(--warning-light)';
                ruleStatus.style.color = '#92400e';
            }
            
            generateRecommendations(adjustedIncome, totalNeeds, totalWants, balance, needsPercent, wantsPercent, savingsPercent, needs, wants, personalSavings);
            updateCharts(needs, wants, baseIncome, totalExpenses, balance, personalSavings, employerContributions);
        }
        
        function generateRecommendations(income, needs, wants, balance, needsP, wantsP, savingsP, needsObj, wantsObj, personalSavings) {
            const recommendations = [];
            if (balance < 0) recommendations.push('×”××¦×‘ ×“×•×¨×© ×”×ª×™×™×—×¡×•×ª ××™×™×“×™×ª - ××ª× ××•×¦×™××™× ×™×•×ª×¨ ×××” ×©× ×›× ×¡.');
            if (savingsP < 10 && balance >= 0) recommendations.push('×©×™×¢×•×¨ ×”×—×™×¡×›×•×Ÿ ×”××™×©×™ × ××•×š. × ×¡×• ×œ×©××•×£ ×œ×¤×—×•×ª ×œ-10% ××”×”×›× ×¡×” ×›×—×™×¡×›×•×Ÿ.');
            if (personalSavings === 0 && balance > 0) recommendations.push('××™×Ÿ ×œ×›× ×—×™×¡×›×•×Ÿ ×§×‘×•×¢ ××¢×‘×¨ ×œ×”×¤×¨×©×•×ª ×¡×•×¦×™××œ×™×•×ª. ××•××œ×¥ ×œ×”×§×™× ×”×•×¨××ª ×§×‘×¢ ×œ×§×•×¤×ª ×’××œ ××• ×”×©×§×¢×•×ª.');
            if (needsP > 50) recommendations.push('×”×•×¦××•×ª ×”×¦×¨×›×™× ×’×‘×•×”×•×ª (' + needsP + '% ×‘××§×•× 50%). ×‘×“×§×• ××¤×©×¨×•×ª ×œ×¦××¦×.');
            if (wantsP > 30) recommendations.push('×”×•×¦××•×ª ×”×¨×¦×•× ×•×ª ×’×‘×•×”×•×ª (' + wantsP + '% ×‘××§×•× 30%). ×©×§×œ×• ×œ×¦××¦×.');
            const totalLoans = needsObj.bankLoan + needsObj.carLoan + needsObj.creditPayments + needsObj.otherLoans;
            if (totalLoans > income * 0.15) recommendations.push('×”×—×–×¨×™ ×”×”×œ×•×•××•×ª ×’×‘×•×”×™× ×-15% ××”×”×›× ×¡×”.');
            if (needsObj.housing > income * 0.3) recommendations.push('×”×•×¦××•×ª ×”×“×™×•×¨ ×’×‘×•×”×•×ª ×-30% ××”×”×›× ×¡×”.');
            if (savingsP >= 20) recommendations.push('×›×œ ×”×›×‘×•×“! ××ª× ×—×•×¡×›×™× 20% ××• ×™×•×ª×¨ ××”×›× ×¡×ª×›× (×œ× ×›×•×œ×œ ×”×¤×¨×©×•×ª ××¢×‘×™×“).');
            if (recommendations.length === 0) recommendations.push('×”×ª×§×¦×™×‘ ×©×œ×›× ×××•×–×Ÿ ×™×¤×”!');
            document.getElementById('recommendationsList').innerHTML = recommendations.map(r => '<li>' + r + '</li>').join('');
        }
        
        function updateCharts(needs, wants, income, expenses, balance, personalSavings, employerContrib) {
            const expenseCtx = document.getElementById('expenseChart').getContext('2d');
            const categories = {
                '×“×™×•×¨': needs.housing + needs.vaadBayit + needs.arnona,
                '×”×œ×•×•××•×ª': needs.bankLoan + needs.carLoan + needs.creditPayments + needs.otherLoans,
                '×—×©×‘×•× ×•×ª': needs.electricity + needs.water + needs.gas + needs.internet + needs.phone,
                '×ª×—×‘×•×¨×”': needs.carPayment + needs.fuel + needs.carInsurance + needs.carMaintenance + needs.transportMisc,
                '××–×•×Ÿ': needs.groceries + wants.restaurants,
                '×™×œ×“×™×': needs.childcare + wants.childActivities + needs.childClothes,
                '×—×™×•×ª ××—××“': needs.petFood + needs.petVet + wants.petOther,
                '×‘×™×˜×•×— ×•×‘×¨×™××•×ª': needs.insuranceTotal + needs.lifeInsurance + needs.healthInsurance + needs.kupat + needs.medical + needs.pharma,
                '×¤× ××™': wants.entertainment + wants.subscriptions + wants.gym + wants.clothing + wants.beauty + wants.gifts,
                '××—×¨': needs.unexpected
            };
            const filteredCategories = Object.entries(categories).filter(([_, v]) => v > 0);
            if (expenseChart) expenseChart.destroy();
            expenseChart = new Chart(expenseCtx, {
                type: 'doughnut',
                data: { labels: filteredCategories.map(([l]) => l), datasets: [{ data: filteredCategories.map(([_, v]) => v), backgroundColor: ['#ef4444','#dc2626','#f59e0b','#10b981','#3b82f6','#8b5cf6','#a855f7','#ec4899','#06b6d4','#6b7280'] }] },
                options: { responsive: true, plugins: { legend: { position: 'bottom', rtl: true, labels: { font: { family: 'Heebo' } } } } }
            });
            const balanceCtx = document.getElementById('balanceChart').getContext('2d');
            if (balanceChart) balanceChart.destroy();
            
            // Show employer contribution separately in chart if exists
            const chartLabels = ['×”×›× ×¡×•×ª', '×”×•×¦××•×ª', '×—×™×¡×›×•×Ÿ ××™×©×™'];
            const chartData = [income, expenses, personalSavings];
            const chartColors = ['#10b981', '#ef4444', '#3b82f6'];
            
            if (employerContrib > 0) {
                chartLabels.push('×”×¤×¨×©×•×ª ××¢×‘×™×“');
                chartData.push(employerContrib);
                chartColors.push('#8b5cf6');
            }
            
            chartLabels.push('×™×ª×¨×”');
            chartData.push(Math.max(balance, 0));
            chartColors.push('#c9a227');
            
            balanceChart = new Chart(balanceCtx, {
                type: 'bar',
                data: { labels: chartLabels, datasets: [{ data: chartData, backgroundColor: chartColors }] },
                options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
            });
        }
        
        document.addEventListener('DOMContentLoaded', function() { calculateBudget(); });
    </script>
</body>
</html>
